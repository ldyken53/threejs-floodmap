<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Three.js Flood Annotation</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap"
            rel="stylesheet"
        />

        <canvas
            hidden
            width="4104"
            height="1856"
            src="img/satelliteblur0.png"
            id="streamCanvas"
        ></canvas>
        <canvas
            hidden
            width="4104"
            height="1856"
            src="img/satelliteblur0.png"
            id="elevateCanvas"
        ></canvas>
    </head>

    <body>
        <div id="loader"></div>
        <div id="ui-menu">
            <button class="session-terminal" id="download">DOWNLOAD</button>
            <button class="session-terminal" id="end">FINISH</button>
            <button class="session-terminal" id="start">START</button>
        </div>

        <form enctype="multipart/form-data" method="post" name="fileinfo">
            <p>Thank you for finishing the study</p>
            <p>
                <label
                    >JSON File to Upload:
                    <input type="file" id="fileInput" name="file" required />
                </label>
            </p>
            <p>
                <input type="submit" value="Stash the file!" />
            </p>
        </form>

        <div id="modal-wrapper">
            <div class="modal-header">
                <h2>Instructions and Guide:</h2>
                <a href="#modal-wrapper" class="btn-close" aria-hidden="true">Ã—</a>
            </div>
            <div class="modal-body">
                <p>Please read and note these instruction if needed ! :D</p>
                <hr />
                <label for="studentId">Student Id:</label>
                <input
                    type="text"
                    id="studentId"
                    name="studentId"
                    placeholder="Enter your student id"
                />
                <small></small>
                <ul>
                    <li>Press <b>Escape</b> to reset the camera</li>
                    <li>Press <b>e</b> erase with brush</li>
                    <li>Press <b>r</b> to annotate by brush in red color</li>
                    <li>Press <b>t</b> to annotate by brush in blue color</li>
                    <li>Press <b>f</b> to run BFS from current point for flood</li>
                    <li>Press <b>p</b> to select points for polygon selection</li>
                    <li>Press <b>l</b> to annotate with BFS to polygon selected by "p"</li>
                    <li>Press <b>n</b> to annotate with Contour tree generated Segmentation</li>
                    <li>Press <b>z</b> to undo the most recent annotation</li>
                    <li>Press <b>M</b> to bring this menu back</li>
                    <li></li>
                </ul>
                <button id="exploration">Explore !!!</button>
            </div>
        </div>
        <script type="module" src="bundle.js"></script>
        <script>
            const form = document.forms.namedItem('fileinfo')
            form.addEventListener('submit', async (event) => {
                event.preventDefault()
                let formData = new FormData(form)
                formData.append('firstName', 'John')
                let file1 = document.getElementById('fileInput').files[0]
                for (const [key, value] of formData.entries()) {
                    console.log(key, value)
                }
                let response = await fetch('http://127.0.0.1:5000/stateUpload', {
                    method: 'POST',
                    body: formData,
                })
                let _response = await response.json()
            })
        </script>
    </body>
</html>
